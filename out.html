responseType=signature&responseMessage=Approved&responseCode=A01&action=dPGFnFTGo%2BUojkiHcK571BVg%2FUoAGLerOV45pK5a5UtAMYIkndornJXZ1y2kLOfPSekiP6Gp7met%0D%0A%2FlCyKb865MqK9DV4vXIdSQ0QWF8Zd1EvOnC1OicbL7phH8VMKyWdlqIcsXwRH8iiiVY3mnpZnT9S%0D%0AoKM6XT%2FcxL9HxB7FxxMZvqZONpFPSMK5mRBpFZ7Oci9MU4S20ljQ3vcHcKQmwDOVLq1gmyDAuYV0%0D%0AkU5mdHFHZvZV%2FTQs%2BjTMvhMjS8nscFVXeUzzkVLXbvU5ybO7yAZrFI3Ksny6Il7OXt3jTY64eWEX%0D%0AqQguXb9wlvEfLnI8msibC9YsBX%2FP8SXG5F66A%2BOnjVD3FODVjUspwKU%2BKicufC9LvXPR4uIL4BcB%0D%0A5K4eP4QRWypaM9Fmu6atvaLPgMK2giNnOLinVtWx%2FGNgdd0b9EeMhHzAULlcJFQOXe69%2BXAAincG%0D%0AMuCDQs1zt1uFs68gOWdyCnIVlGjRRt3aYC9OpUwWSuRln%2FY9uWnjNelxSuqE75jUn%2BqJFi3rxQbx%0D%0AQUsoiQZlVaUEcytjD8yZugLZKp%2BYHYlz3kk748S2S4JUMhhwWojUkiTMMgUftv%2BKkR4YKsw7Rpkh%0D%0AewwcS9Wh6Gu2oaULairhKwqzROlMJe922zPzCa1nPA5oyL6LfHV3fTSn70N99nsauTufq84Df4IP%0D%0AMg6P6m5VV7jBPPlAxFjrIBxXHzMHtI%2BBTPeewZ05YhKYp2W96j4c35ofjdyeOTlVayrVQuqKgZ3d%0D%0AxXNoMo6kXhZD8KL0XCfaPVIj5MgcYbqXWYWAj%2BNnxCUUhycQh%2F26mhDQBTaVpb%2FVYfc7jO31Jdpd%0D%0AyHAHWnmWD3H2aAJvDrguVsrd394O4cn%2FRgfzQio3deWotu8%2B1cHB%2Fi5qea7LBhO6D76aSdhMgiI4%0D%0AHx3%2BYx5%2Fri9pe4Npb%2B0mYOXm7sVIkpfIaW0gFYjQpI3JlWAwTtkcMW4jXd%2FqShInjPlV%2BaHbjW7R%0D%0Aeh3levl%2FUTY4BBxT2jxXwi4XUlm%2FoWcg284vnJbLwqVzGcgKVDjCZqMjHuaHho1fNrS7ZRD8frY1%0D%0AJ%2FfeZuJUqbl3ETzzlHWH4Sk6KIsOyGJnxOW4DuZ8r%2FpQ%2BfCpxuBjueff8nhXM8TW4%2FDPAlVpeFAA%0D%0Aiun4vrey7kkt9txocANzbZGsug7oTxMxEg%3D%3D%0D%0A
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" />
<meta http-equiv="Vary" content="*" />

<meta name="author" content="DixiPay"/>
<meta name="description" content="Secured Payment Page"/>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge" />

<html xmlns="http://www.w3.org/1999/xhtml">


<link type="text/css" rel="stylesheet" href="../hpp/css/style.css"/>
<link type="text/css" rel="stylesheet" href="../hpp/css/dixi.css"/>
<link type="text/css" rel="stylesheet" href="../hpp/css/waitMe.css" />
<link type="text/css" rel="stylesheet" href="../hpp/css/jquery-ui.css" />



<script type="text/javascript" src="../hpp/js/jquery.js" ></script>
<script type="text/javascript" src="../hpp/js/jquery.cookie.js"></script>
<script  type="text/javascript" src="../hpp/js/notify.min.js"></script>
<script type="text/javascript" src="../hpp/js/jquery-ui.js"></script>

<script type="text/javascript" src="../hpp/js/jquery.localize.min.js"></script>


<script type="text/javascript" src="../hpp/js/jquery.inputmask.bundle.min.js"></script>

<script type="text/javascript" src="../hpp/js/jquery.validate.min.js"></script>
<script type="text/javascript" src="../hpp/js/additional-methods.min.js"></script>

<script type="text/javascript" src="../hpp/js/dixiapi.js"></script>


<script type="text/javascript" src="../hpp/js/waitMe.min.js"></script>

<link type="text/css" href="../hpp/css/jquery.keypad.css" rel="stylesheet"> 
<script type="text/javascript" src="../hpp/js/jquery.plugin.min.js"></script> 
<script type="text/javascript" src="../hpp/js/jquery.keypad.js"></script>
<script type="text/javascript" src="../hpp/js/purl.js"></script>

<script type="text/javascript" src="../hpp/js/jquery.countdown.min.js"></script>

<script type="text/javascript" src="../hpp/js/device.min.js"></script>


<script type="text/javascript">
  maxmind_user_id = "54199";
  (function() {
    var loadDeviceJs = function() {
      var element = document.createElement('script');
      element.src = ('https:' == document.location.protocol ? 'https:' : 'http:') 
        + '//device.maxmind.com/js/device.js';
      document.body.appendChild(element);
    };
    if (window.addEventListener) {
      window.addEventListener('load', loadDeviceJs, false);
    } else if (window.attachEvent) {
      window.attachEvent('onload', loadDeviceJs);
    }
  })();
</script>

 <script type="text/javascript">
 //variables 
$(window).load(function() {
  $(".loader").fadeOut("slow");
})

    var validate = true;
    var locale = navigator.languages ? navigator.languages[0] : (navigator.language || navigator.userLanguage);



    var verificationFieldsArray = ["#first_name","#last_name","#streetNative","#cityNative","#state","#zipCode","#countryCode","#phone","#email","#month","#year","#csc"];         
    
    var currency = { "USD": ["Visa","MasterCard","AmericanExpress","Discover","JCB","Diners","ManGo","DixiPay"],
                     "EUR": ["Visa","MasterCard","AmericanExpress","Discover","JCB","Diners","ManGo","DixiPay"],
                     "RUB": ["Visa","MasterCard","MIR"],
                     "EGP": ["Visa","MasterCard","AmericanExpress","Discover","JCB","Diners","DixiPay"],
                     "TMT": ["AltynAsyr","ManGo"], };

    var pageCurrency = "USD";

    var invalidCCNumMsg = "Invalid Card Number";
    var invalidCCTypeMsg = "Invalid Card Type";
    var invalidCVV="Invalid Credit Card CVV";
    var waitMessage ="Processing";
    var watermark = 'Enter Cardholder\'s Name';

    var mac = 300042;

    var currentPaymentService  = "card";
    var redirect = true;
    
    var fp = new Fingerprint2();

      //console.log("Locale "+locale);


    var fail = /^(?:f(?:alse)?|no?|0+)$/i;

    Boolean.parse = function(val) { 
        return !fail.test(val) && !!val;
    };


  setTimeout(function(){
   

    $( "#timeout-remider" ).dialog({
      modal: true,
      resizable: false,
      width: 350,
      create: function (event, ui) {
        $(".ui-widget-header").hide();
      },
      buttons: {
        Ok: function() {
          $( this ).dialog( "close" );
        }
      }
    });

     $(".ui-dialog-titlebar").hide();

    }, 120000);

    var DixiAPI = function() {

    return {

      translit: function (streetAsText){
              var str = streetAsText;
              var space = ' ';
              var link = '';
              var transl = {
                  'а': 'a', 'б': 'b', 'в': 'v', 'г': 'g', 'д': 'd', 'е': 'e', 'ё': 'e', 'ж': 'zh',
                  'з': 'z', 'и': 'i', 'й': 'j', 'к': 'k', 'л': 'l', 'м': 'm', 'н': 'n',
                  'о': 'o', 'п': 'p', 'р': 'r','с': 's', 'т': 't', 'у': 'u', 'ф': 'f', 'х': 'h',
                  'ц': 'c', 'ч': 'ch', 'ш': 'sh', 'щ': 'sh','ъ': space,
                  'ы': 'y', 'ь': space, 'э': 'e', 'ю': 'yu', 'я': 'ya','/':space
              }
      //        console.log(str)
          if (str != ''){
              str = str.toLowerCase();
           }

          for (var i = 0; i < str.length; i++){
             if (/[а-яё]/.test(str.charAt(i))){ // заменяем символы на русском
                  link += transl[str.charAt(i)];
              } else if (/^[a-z\.\s\,]*$/.test(str.charAt(i))){ // символы на анг. оставляем как есть
                  link += str.charAt(i);
              } else {
                  //if (link.slice(-1) !== space) link += space; // прочие символы заменяем на space
                  link += str.charAt(i);
              }
          }
              return link;
     
      },

        // Validate card number and card type
        validateCardNumberAndType: function () {
            if(DixiAPI.detectCardType()){
                return DixiAPI.validateCardNumber();
            }
            
            return false;
        },
        // load verifiaction messages
        loadVerificationRules : function(localeRule){
                try{
                    //remove verifications rules
                     for (var i = 0; i < verificationFieldsArray.length; i++) {
                        jQuery(verificationFieldsArray[i]).rules("remove");
                    // console.log("Remove rule "+verificationFieldsArray[i])
                    }
             
                     // console.log("Load rule for "+localeRule)
                      $.getScript("../hpp/validator/validation.rules."+localeRule, function( data, textStatus, jqxhr ) {
       
                      });
               

                }catch(e){
                console.log(e.stack);
            }
            return true;

        },

        // just detect card type
        detectCardType: function () {
            try {
                var card = jQuery("#accountNumberMack");
                var cardType = jQuery("input[id='input-creditCardType']");
                if(!cardType )
                    return false;
                
                var v = card.val().split('-').join('');
                v=v.split('X').join('');
               // errorField.empty();

                if(v==''){
                    jQuery(".brand").empty();
                    return '';
                }
                  
                
                var errorMsg = null;

                if((errorMsg == null || typeof errorMsg == 'undefined')) {
                    var checkedType = isVisa(v) ? 'Visa'  : (isMC(v) ? 'MasterCard'
                                                          : (isAmex(v) ? 'AmericanExpress'
                                                          : (isDiscover(v) ? 'Discover'
                                                          : (isJCB(v) ? 'JCB'
                                                          : (isDiners(v) ? 'Diners'
                                                          : (isAltynAsyr(v) ? 'AltynAsyr'
                                                          : (isManGo(v) ? 'ManGo'
                                                          : (isMIR(v) ? 'MIR'
                                                          : (isDixiPay(v) ? 'DixiPay'
                                                          : checkedType)))))))));


                    var isCardAccepted = $.map(currency, function( value, index ) {
  //                     console.log( "Page currency" +" "+pageCurrency );
                            if(index==pageCurrency){
  //                      console.log( value +" "+index );
                              return  (value.join(',').indexOf(checkedType) > -1);
                            }
                      });

                    if (Boolean.parse(isCardAccepted)) {
  //                   console.log( " allow "+isCardAccepted );
                        DixiAPI.enableCardType(checkedType);
                        cardType.val(checkedType);
                    } else {
  //                    console.log( " disallow "+isCardAccepted );
                        errorMsg = invalidCCTypeMsg;
                        jQuery(".brand").empty();
                        DixiAPI.displayMessage(errorMsg,card);
                        return false;
                    }
              

                }
            }catch(e){
                console.log(e.stack);
               
            }
            return true;
        },
        
        timer: function() {
             var fiveSeconds = new Date().getTime() + 7000;
              $('#clockContainer').countdown(fiveSeconds, {elapse: false}).on('update.countdown', function(event) {
                                              var $this = $(this);
                                             if (event.elapsed) {
                                                $this.html('Processing redirect ...'); 
                                              } else {
                                                $this.html(event.strftime('Redirect to merchant in : <span>%S</span> seconds')); 
                                              }
                                           }) 
                                           .on("finish.countdown" ,function(event) {
                                               if(redirect){
                                                $('#clockContainer').countdown('stop');
                                                  top.location.href = 'http://';
                                                }else{
                                                $('#clockContainer').countdown('stop'); 
                                                  top.location.href = 'http://';
                                                }
                                           });

        },

        // just validate card number
        validateCardNumber: function () {
            
            try {
                var card = jQuery("#accountNumberMack");

                if(!card && jQuery(card).val().length <= 0)
                    return false;
                  
                var v = card.val().split('-').join('');
                v=v.split('X').join('');

                card.empty();

                if(v==''){
                    return '';
                }
                  
                var errorMsg;
                //check card number
                if (!isCreditCard(v)) {
                       errorMsg = invalidCCNumMsg;
                }

                if (errorMsg != null && typeof errorMsg != 'undefined') {
                    DixiAPI.displayMessage(errorMsg,card);
                    return false;
                }
          
               // card.val(card.val().replace(/\D+/g, ""));
            }catch(e){
                console.log(e.stack);
               // alert(e);
            }
            return true;
        },
        
         validateCardSecurity:function(){
              var card = jQuery("#csc");

            var v=card.val();
             var sec = v.replace(/\D+/g, "");
             var errorMsg;
              if (v != sec){
                  errorMsg =invalidCVV;
              }else{
                if(v.length != 3){
                    errorMsg = invalidCVV;
              }}
              if (errorMsg != null && typeof errorMsg != 'undefined') {
                    DixiAPI.displayMessage(errorMsg,card);
                    return false;
                }
        return true;
        
        },

        submitForm:function(){
          $("#process").submit();
 //         console.log('Pay by '+currentPaymentService);
       
        },
        
      
        displayMessage:function(message, messagebox) {
           messagebox.notify(message,{hideAnimation:"fadeOut", showAnimation:"fadeIn", showDuration: 200, autoHideDelay: 3000});
            DixiAPI.resizeEvent();
        },

        enableCardType:function(checkedType){
      
           if(checkedType){
                 $(".brand").empty();
                 $(".brand").append('<div class="'+checkedType+'"></div>');

                 if(checkedType=='AltynAsyr'){
                  $("#cvc").hide();
                  $("#csc").prop('disabled', true);
                 }else{
                  $("#cvc").show();
                  $("#csc").prop('disabled', false);
                 }

            }

        },

        resizeEvent: function() {
            var height=jQuery(document).height();
            var width =jQuery(document).width();
            
            //needed for firefox
            if(document.body.offsetHeight){
                height= document.body.offsetHeight;
            } else {
                height= document.body.scrollHeight;
            }
        },
        cancel : function() {
                 top.location.href = "http://";
            }
    };
    }();



</script>
<head>
  <title>Secured Payment Page</title>
</head>

<body style="direction:ltr;">
  <div class="loader"></div>
  <div id="3ds" style="visibility:hidden;"></div>

<div class="wrapper" id="container">
	<div class="header">
    	<div class="logo" style="background-image:url(../gates/logo?portfolioCode=400);">
      </div>
        <div class="lang">
        	<ul>
                <li class="en" lang="en"></li>
                <li class="ru" lang="ru"></li>
                <li class="de" lang="de"></li>
                <li class="es" lang="es"></li>
                <li class="fr" lang="fr"></li>
                <li class="ar" lang="ar"></li>

            </ul>
        </div>
    </div>
	<div class="content">
		    <input id="input-creditCardType" name="field_creditCardType" type="hidden">	
    	    	
    	<form action="https://lk.dixipay.eu:443/gates/processing" method="post" name="process" id="process" accept-charset="UTF-8">
        
       	<div class="block" style="height:100px">
    			<div class="company-logo" >
                	<img style="padding-top: 1px;" src="/gates/logo?merchantCode=300042">
                </div>
                <div class="payment-info">
                                   
                    <div class="product">
                         <div class="company-bold" style="padding-left: 1px;" id="nameDBA" >Big Company</div>   
                    </div>

                	<div class="company" data-localize="order-label">Order #</div>
                    <div class="company" style="padding-left: 10px;" id="transactionCodeDiv">0004</div>
                    <div class="product">
                	   <div class="company" data-localize="amount-label">Amount</div>
                       <div class="company" style="padding-left: 10px;" id="amountPTS">0.00</div>
                    </div>
     
                </div>
                <div id="messageContainer" style="color:red;" style="visible:false;"></div>      
    	</div>
<div class="block" id="paymentSelector">
  <div class="legend" data-localize="payment-type" id="payment-type"></div>
    <table style="width: 100%;" border="0" id="payMethods" data-count="1">
    <tbody >
    <tr id="pm1">  
                      <td class="td-payselector" id="id-payselector-1">
              <label class="rad">
              <input data-mac="1494214780" class="ignore" type="radio" id="id-payselector-radio-1" name="r1" value="card"  checked  ></input>
                      <i></i><img src='../hpp/img/card.png'  class="img-payselector"/>
              <!-- <span data-localize="card">&nbsp;No Localization found</span> -->
              </label>  
          </td>
          
        
              </tr>
    </tbody>
    </table>
</div>
<div class="block" id="invoiceContainer">
  <div class="legend" style="cursor: pointer"  id="invoice-info"><nobr data-localize="invoice-info">  Information about order</nobr><img id="collapse" src="../hpp/img/collapse-down.png" style="position: absolute;" ></img></div>
  <div id="invoice-table">
  <table width="100%" border="0" cellspacing="0" cellpadding="0" style="font-size:12px; color: #3c4448;font-family: Verdana, Arial, Helvetica, sans-serif;font-size: 12px;">
  <tbody>
              <tr>
              <th align="center" style="line-height: 22px; background-color: #892034; font-weight: bold; color: #FFF;  padding-right: 5px; padding-left: 5px; border-right-width: 1px; border-right-style: dotted; border-right-color: #FFF; ">№</th>
                <th align="center" style="line-height: 22px; background-color: #892034; font-weight: bold; color: #FFF;  padding-right: 5px; padding-left: 5px; border-right-width: 1px; border-right-style: dotted; border-right-color: #FFF; " data-localize="invoice-item">Items</th>
                <th align="center" style="background-color: #892034; font-weight: bold; color: #FFF;  padding-right: 5px; padding-left: 5px; border-right-width: 1px; border-right-style: dotted; border-right-color: #FFF; " data-localize="invoice-item-cost">Price per item</th>
                <th align="center" style="background-color: #892034; font-weight: bold; color: #FFF;  padding-right: 5px; padding-left: 5px; border-right-width: 1px; border-right-style: dotted; border-right-color: #FFF; " data-localize="invoice-item-count">Quantity</th>
                <th align="center" style="background-color: #892034; font-weight: bold; color: #FFF;  padding-right: 5px; padding-left: 5px; border-right-width: 1px; border-right-style: dotted; border-right-color: #FFF; " data-localize="invoice-item-sum">Sum</th>
              </tr>
    <tr>
         <td align="center" style="border-bottom-color: #892034; border-bottom-width: 1px;  border-bottom-style: dotted; border-left-width: 1px; border-left-style: dotted; border-left-color: #892034;">1</td>
          <td align="center" style="border-bottom-color: #892034; border-bottom-width: 1px;   border-bottom-style: dotted; border-left-width: 1px; border-left-style: dotted; border-left-color: #892034;">Ð¢Ð¾Ð²Ð°Ñ</td>
          <td align="center" style="border-bottom-color: #892034; border-bottom-width: 1px;   border-bottom-style: dotted; border-left-width: 1px; border-left-style: dotted; border-left-color: #892034;">549.00</td>
          <td align="center" style="border-bottom-color: #892034; border-bottom-width: 1px;  border-bottom-style: dotted; border-left-width: 1px; border-left-style: dotted; border-left-color: #892034;">1</td>
          <td align="center" style="border-bottom-color: #892034; border-bottom-width: 1px;   border-bottom-style: dotted; border-left-width: 1px; border-left-style: dotted; border-left-color: #892034;">549.00</td>
      </tr>
  
    <tfoot>
                 </tfoot>
</tbody>
</table>
</div>
</div>
 <div class="block" id="billing">
            
			<div class="legend" data-localize="billing-info" id="billing-info">Billing Info</div>
			<div class="line">
            	<div class="title" data-localize="address" id="adressLabel">Address</div>
                <div class="field" id="adressField"><input class="form-element required" type="text" name="streetNative"  id="streetNative" maxlength="80" value="ÑÐ». ÐÐµÐ½Ð¸Ð½Ð° 102" style="width: 625px;" title="">
                                  </div>
			</div>
			<div class="line">
				<div class="side-left">
	                <div class="title" data-localize="city">City</div>
	                <div class="field "><input class="form-element required" type="text" id="cityNative" name="cityNative" maxlength="45" value="ÐÐ¾ÑÐºÐ²Ð°" title=""></div>	
	            </div>
	            <div class="side-right">
	                <div class="title" data-localize="zip">ZIP/Postal code</div>
	                <div class="field"><input class="form-element required" type="text" id="zipCode" name="zipCode" value="30301" title=""></div>
	            </div>		
			</div>
			<div class="line">
	          	<div class="side-left">
	                <div class="title" data-localize="country">Country</div>
	                <div class="field" >
            <select  id="countryCode" name="countryCode" title="">
            <option value="AF" code="93">Afghanistan</option>
            <option value="AL" code="355">Albania</option>
            <option value="DZ" code="213">Algeria</option>
            <option value="AD" code="376">Andorra</option>
            <option value="AO" code="244">Angola</option>
            <option value="AI" code="1264">Anguilla</option>
            <option value="AQ" code="672">Antarctica</option>
            <option value="AG" code="1268">Antigua and Barbuda</option>
            <option value="AR" code="54">Argentina</option>
            <option value="AM" code="374">Armenia</option>
            <option value="AW" code="297">Aruba</option>
            <option value="AU" code="61">Australia</option>
            <option value="AT" code="43">Austria</option>
            <option value="AZ" code="994">Azerbaijan</option>
            <option value="BS" code="1242">Bahamas</option>
            <option value="BH" code="973">Bahrain</option>
            <option value="BD" code="880">Bangladesh</option>
            <option value="BB" code="1246">Barbados</option>
            <option value="BY" code="375">Belarus</option>
            <option value="BE" code="32">Belgium</option>
            <option value="BZ" code="501">Belize</option>
            <option value="BJ" code="229">Benin</option>
            <option value="BM" code="1441">Bermuda</option>
            <option value="BT" code="975">Bhutan</option>
            <option value="BO" code="591">Bolivia, Plurinational State of</option>
            <option value="BQ" code="599">Bonaire, Sint Eustatius and Saba</option>
            <option value="BA" code="387">Bosnia and Herzegovina</option>
            <option value="BW" code="267">Botswana</option>
            <option value="BV" code="47">Bouvet Island</option>
            <option value="BR" code="55">Brazil</option>
            <option value="IO" code="246">British Indian Ocean Territory</option>
            <option value="BN" code="673">Brunei Darussalam</option>
            <option value="BG" code="359">Bulgaria</option>
            <option value="BF" code="226">Burkina Faso</option>
            <option value="BI" code="257">Burundi</option>
            <option value="KH" code="855">Cambodia</option>
            <option value="CM" code="237">Cameroon</option>
            <option value="CA" code="1">Canada</option>
            <option value="CV" code="238">Cape Verde</option>
            <option value="KY" code="1345">Cayman Islands</option>
            <option value="CF" code="236">Central African Republic</option>
            <option value="TD" code="235">Chad</option>
            <option value="CL" code="56">Chile</option>
            <option value="CN" code="86">China</option>
            <option value="CX" code="61">Christmas Island</option>
            <option value="CC" code="61">Cocos (Keeling) Islands</option>
            <option value="CO" code="57">Colombia</option>
            <option value="KM" code="269">Comoros</option>
            <option value="CG" code="242">Congo</option>
            <option value="CD" code="243">Congo, the Democratic Republic of the</option>
            <option value="CK" code="682">Cook Islands</option>
            <option value="CR" code="506">Costa Rica</option>
            <option value="HR" code="385">Croatia</option>
            <option value="CU" code="53">Cuba</option>
            <option value="CW" code="599">Curaçao</option>
            <option value="CY" code="357">Cyprus</option>
            <option value="CZ" code="420">Czech Republic</option>
            <option value="CI" code="225">Côte d'Ivoire</option>
            <option value="DK" code="45">Denmark</option>
            <option value="DJ" code="253">Djibouti</option>
            <option value="DM" code="1767">Dominica</option>
            <option value="DO" code="1809">Dominican Republic</option>
            <option value="EC" code="593">Ecuador</option>
            <option value="EG" code="20">Egypt</option>
            <option value="SV" code="503">El Salvador</option>
            <option value="GQ" code="240">Equatorial Guinea</option>
            <option value="ER" code="291">Eritrea</option>
            <option value="EE" code="372">Estonia</option>
            <option value="ET" code="251">Ethiopia</option>
            <option value="FK" code="500">Falkland Islands (Malvinas)</option>
            <option value="FO" code="298">Faroe Islands</option>
            <option value="FJ" code="679">Fiji</option>
            <option value="FI" code="358">Finland</option>
            <option value="FR" code="33">France</option>
            <option value="GF" code="594">French Guiana</option>
            <option value="PF" code="689">French Polynesia</option>
            <option value="TF" code="262">French Southern Territories</option>
            <option value="GA" code="241">Gabon</option>
            <option value="GM" code="220">Gambia</option>
            <option value="GE" code="995">Georgia</option>
            <option value="DE" code="49">Germany</option>
            <option value="GH" code="233">Ghana</option>
            <option value="GI" code="350">Gibraltar</option>
            <option value="GR" code="30">Greece</option>
            <option value="GL" code="299">Greenland</option>
            <option value="GD" code="1473">Grenada</option>
            <option value="GP" code="590">Guadeloupe</option>
            <option value="GU" code="1671">Guam</option>
            <option value="GT" code="502">Guatemala</option>
            <option value="GG" code="44">Guernsey</option>
            <option value="GN" code="224">Guinea</option>
            <option value="GW" code="245">Guinea-Bissau</option>
            <option value="GY" code="592">Guyana</option>
            <option value="HT" code="509">Haiti</option>
            <option value="HM" code="672">Heard Island and McDonald Islands</option>
            <option value="VA" code="3906">Holy See (Vatican City State)</option>
            <option value="HN" code="504">Honduras</option>
            <option value="HK" code="852">Hong Kong</option>
            <option value="HU" code="36">Hungary</option>
            <option value="IS" code="354">Iceland</option>
            <option value="IN" code="91">India</option>
            <option value="ID" code="62">Indonesia</option>
            <option value="IR" code="98">Iran, Islamic Republic of</option>
            <option value="IQ" code="964">Iraq</option>
            <option value="IE" code="353">Ireland</option>
            <option value="IM" code="44">Isle of Man</option>
            <option value="IL" code="972">Israel</option>
            <option value="IT" code="39">Italy</option>
            <option value="JM" code="1876">Jamaica</option>
            <option value="JP" code="81">Japan</option>
            <option value="JE" code="44">Jersey</option>
            <option value="JO" code="962">Jordan</option>
            <option value="KZ" code="7">Kazakhstan</option>
            <option value="KE" code="254">Kenya</option>
            <option value="KI" code="686">Kiribati</option>
            <option value="KP" code="850">Korea, Democratic People's Republic of</option>
            <option value="KR" code="82">Korea, Republic of</option>
            <option value="KW" code="965">Kuwait</option>
            <option value="KG" code="996">Kyrgyzstan</option>
            <option value="LA" code="856">Lao People's Democratic Republic</option>
            <option value="LV" code="371">Latvia</option>
            <option value="LB" code="961">Lebanon</option>
            <option value="LS" code="266">Lesotho</option>
            <option value="LR" code="231">Liberia</option>
            <option value="LY" code="218">Libya</option>
            <option value="LI" code="423">Liechtenstein</option>
            <option value="LT" code="370">Lithuania</option>
            <option value="LU" code="352">Luxembourg</option>
            <option value="MO" code="853">Macao</option>
            <option value="MK" code="389">Macedonia, the Former Yugoslav Republic of</option>
            <option value="MG" code="261">Madagascar</option>
            <option value="MW" code="265">Malawi</option>
            <option value="MY" code="60">Malaysia</option>
            <option value="MV" code="960">Maldives</option>
            <option value="ML" code="223">Mali</option>
            <option value="MT" code="356">Malta</option>
            <option value="MH" code="692">Marshall Islands</option>
            <option value="MQ" code="596">Martinique</option>
            <option value="MR" code="222">Mauritania</option>
            <option value="MU" code="230">Mauritius</option>
            <option value="YT" code="262">Mayotte</option>
            <option value="MX" code="52">Mexico</option>
            <option value="FM" code="691">Micronesia, Federated States of</option>
            <option value="MD" code="373">Moldova, Republic of</option>
            <option value="MC" code="377">Monaco</option>
            <option value="MN" code="976">Mongolia</option>
            <option value="ME" code="382">Montenegro</option>
            <option value="MS" code="1664">Montserrat</option>
            <option value="MA" code="212">Morocco</option>
            <option value="MZ" code="258">Mozambique</option>
            <option value="MM" code="95">Myanmar</option>
            <option value="NA" code="264">Namibia</option>
            <option value="NR" code="674">Nauru</option>
            <option value="NP" code="977">Nepal</option>
            <option value="NL" code="31">Netherlands</option>
            <option value="NC" code="687">New Caledonia</option>
            <option value="NZ" code="064">New Zealand</option>
            <option value="NI" code="505">Nicaragua</option>
            <option value="NE" code="227">Niger</option>
            <option value="NG" code="234">Nigeria</option>
            <option value="NU" code="683">Niue</option>
            <option value="NF" code="672">Norfolk Island</option>
            <option value="MP" code="1670">Northern Mariana Islands</option>
            <option value="NO" code="47">Norway</option>
            <option value="OM" code="968">Oman</option>
            <option value="PK" code="92">Pakistan</option>
            <option value="PW" code="680">Palau</option>
            <option value="PS" code="970">Palestine, State of</option>
            <option value="PA" code="507">Panama</option>
            <option value="PG" code="675">Papua New Guinea</option>
            <option value="PY" code="595">Paraguay</option>
            <option value="PE" code="51">Peru</option>
            <option value="PH" code="63">Philippines</option>
            <option value="PN" code="870">Pitcairn</option>
            <option value="PL" code="48">Poland</option>
            <option value="PT" code="351">Portugal</option>
            <option value="PR" code="1">Puerto Rico</option>
            <option value="QA" code="974">Qatar</option>
            <option value="RO" code="40">Romania</option>
            <option value="RU" code="7">Russian Federation</option>
            <option value="RW" code="250">Rwanda</option>
            <option value="RE" code="262">Réunion</option>
            <option value="BL" code="590">Saint Barthélemy</option>
            <option value="SH" code="290">Saint Helena, Ascension and Tristan da Cunha</option>
            <option value="KN" code="1869">Saint Kitts and Nevis</option>
            <option value="LC" code="1758">Saint Lucia</option>
            <option value="MF" code="590">Saint Martin (French part)</option>
            <option value="PM" code="508">Saint Pierre and Miquelon</option>
            <option value="VC" code="1784">Saint Vincent and the Grenadines</option>
            <option value="WS" code="685">Samoa</option>
            <option value="SM" code="378">San Marino</option>
            <option value="ST" code="239">Sao Tome and Principe</option>
            <option value="SA" code="966">Saudi Arabia</option>
            <option value="SN" code="221">Senegal</option>
            <option value="RS" code="381 p">Serbia</option>
            <option value="SC" code="248">Seychelles</option>
            <option value="SL" code="232">Sierra Leone</option>
            <option value="SG" code="65">Singapore</option>
            <option value="SX" code="1721">Sint Maarten (Dutch part)</option>
            <option value="SK" code="421">Slovakia</option>
            <option value="SI" code="386">Slovenia</option>
            <option value="SB" code="677">Solomon Islands</option>
            <option value="SO" code="252">Somalia</option>
            <option value="ZA" code="27">South Africa</option>
            <option value="GS" code="500">South Georgia and the South Sandwich Islands</option>
            <option value="SS" code="211">South Sudan</option>
            <option value="ES" code="34">Spain</option>
            <option value="LK" code="94">Sri Lanka</option>
            <option value="SD" code="249">Sudan</option>
            <option value="SR" code="597">Suriname</option>
            <option value="SJ" code="47">Svalbard and Jan Mayen</option>
            <option value="SZ" code="268">Swaziland</option>
            <option value="SE" code="46">Sweden</option>
            <option value="CH" code="41">Switzerland</option>
            <option value="SY" code="963">Syrian Arab Republic</option>
            <option value="TW" code="886">Taiwan, Province of China</option>
            <option value="TJ" code="992">Tajikistan</option>
            <option value="TZ" code="255">Tanzania, United Republic of</option>
            <option value="TH" code="66">Thailand</option>
            <option value="TL" code="670">Timor-Leste</option>
            <option value="TG" code="228">Togo</option>
            <option value="TK" code="690">Tokelau</option>
            <option value="TO" code="676">Tonga</option>
            <option value="TT" code="1868">Trinidad and Tobago</option>
            <option value="TN" code="216">Tunisia</option>
            <option value="TR" code="90">Turkey</option>
            <option value="TM" code="993">Turkmenistan</option>
            <option value="TC" code="1649">Turks and Caicos Islands</option>
            <option value="TV" code="688">Tuvalu</option>
            <option value="UG" code="256">Uganda</option>
            <option value="UA" code="380">Ukraine</option>
            <option value="AE" code="971">United Arab Emirates</option>
            <option value="GB" code="44">United Kingdom</option>
            <option value="US" code="1">United States</option>
            <option value="UY" code="598">Uruguay</option>
            <option value="UZ" code="998">Uzbekistan</option>
            <option value="VU" code="678">Vanuatu</option>
            <option value="VE" code="58">Venezuela, Bolivarian Republic of</option>
            <option value="VN" code="84">Viet Nam</option>
            <option value="VG" code="1284">Virgin Islands, British</option>
            <option value="VI" code="1340">Virgin Islands, U.S.</option>
            <option value="WF" code="681">Wallis and Futuna</option>
            <option value="EH" code="212">Western Sahara</option>
            <option value="YE" code="967">Yemen</option>
            <option value="ZM" code="260">Zambia</option>
            <option value="ZW" code="263">Zimbabwe</option>
            <option value="AX" code="358">Åland Islands</option>
          </select>
        </div>	
	      </div>
	       <div class="side-right">
	                <div class="title" data-localize="state">State</div>
	                <div class="field">
            <select name="state" id="state" title="">
            <option value="NA">Non US/Canada/Australia</option>
            <optgroup label="US States">
            <option value="AL">Alabama</option>
            <option value="AK">Alaska</option>
            <option value="AS">American Samoa</option>
            <option value="AZ">Arizona</option>
            <option value="AR">Arkansas</option>
            <option value="AE">Armed Forces Europe</option>
            <option value="CA">California</option>
            <option value="CO">Colorado</option>
            <option value="CT">Connecticut</option>
            <option value="DE">Delaware</option>
            <option value="DC">District of Columbia</option>
            <option value="FL">Florida</option>
            <option value="GA">Georgia</option>
            <option value="GU">Guam</option>
            <option value="HI">Hawaii</option>
            <option value="ID">Idaho</option>
            <option value="IL">Illinois</option>
            <option value="IN">Indiana</option>
            <option value="IA">Iowa</option>
            <option value="KS">Kansas</option>
            <option value="KY">Kentucky</option>
            <option value="LA">Louisiana</option>
            <option value="ME">Maine</option>
            <option value="MH">Marshall Islands</option>
            <option value="MD">Maryland</option>
            <option value="MA">Massachusetts</option>
            <option value="MI">Michigan</option>
            <option value="MN">Minnesota</option>
            <option value="MS">Mississippi</option>
            <option value="MO">Missouri</option>
            <option value="MT">Montana</option>
            <option value="NE">Nebraska</option>
            <option value="NV">Nevada</option>
            <option value="NH">New Hampshire</option>
            <option value="NJ">New Jersey</option>
            <option value="NM">New Mexico</option>
            <option value="NY">New York</option>
            <option value="NC">North Carolina</option>
            <option value="ND">North Dakota</option>
            <option value="OH">Ohio</option>
            <option value="OK">Oklahoma</option>
            <option value="OR">Oregon</option>
            <option value="PW">Palau</option>
            <option value="PA">Pennsylvania</option>
            <option value="PR">Puerto Rico</option>
            <option value="RI">Rhode Island</option>
            <option value="SC">South Carolina</option>
            <option value="SD">South Dakota</option>
            <option value="TN">Tennessee</option>
            <option value="TX">Texas</option>
            <option value="UT">Utah</option>
            <option value="VT">Vermont</option>
            <option value="VA">Virginia</option>
            <option value="WA">Washington</option>
            <option value="WV">West Virginia</option>
            <option value="WI">Wisconsin</option>
            <option value="WY">Wyoming</option>
            </optgroup>
            <optgroup label="Canadian Provinces">
            <option value="AB">Alberta</option>
            <option value="BC">British Columbia</option>
            <option value="MB">Manitoba</option>
            <option value="NB">New Brunswick</option>
            <option value="NF">Newfoundland</option>
            <option value="NS">Nova Scotia</option>
            <option value="NT">NW Territories</option>
            <option value="ON">Ontario</option>
            <option value="PE">Prince Edward Isl</option>
            <option value="PQ">Quebec</option>
            <option value="SK">Saskatchewan</option>
            <option value="YT">Yukon</option>
            </optgroup>
            <optgroup label="Australian Territories">
            <option value="ACT">Australian Capital Territory</option>
            <option value="NSW">New South Wales</option>
            <option value="NT">Northern Territory</option>
            <option value="QLD">Queensland</option>
            <option value="SA">South Australia</option>
            <option value="TAS">Tasmania</option>
            <option value="WA">Western Australia</option>
            <option value="VIC">Victoria</option>
            </optgroup>
            </select></div>
	            </div>
			</div>
			<div class="line">
	            <div class="side-left">
	                <div class="title" data-localize="phone">Phone</div>
	                <div class="field"><input class="form-element required" type="text" id="phone" name="phone" value="7925856324" title=""></div>	
	            </div>
	            <div class="side-right">
	                <div class="title" data-localize="email">Email</div>
	                <div class="field"><input class="form-element required" type="text" id="email" name="email" value="mail@mail.ru" ></div>
	            </div>
			</div>
		</div>
    <div class="block" id="card-info">
        	 
        	<div class="card" id="vmc">
        		<div class="brand"> </div>
            	<div class="card-info">
                	<div class="line" style="width:340px;">
                    	<div class="title" data-localize="pan">Card number</div>
                        <div class="field form-element">
                        <input type="text" class=text-input name="accountNumberMack" value="" id="accountNumberMack" title="" autocomplete="off"  onblur="javascript:DixiAPI.validateCardNumberAndType();"/></div>
                    </div>
                    <div class="line" style="width:340px;">
                    	<div class="title" data-localize="expr">Expiration date</div>
                        <div class="field form-element">
                            <select name="month" id="month" title="">
                                    <option value="" selected="selected" data-localize="choose">Choose</option>
                                    <option value="01">01</option>
                                    <option value="02">02</option>
                                    <option value="03">03</option>
                                    <option value="04">04</option>
                                    <option value="05">05</option>
                                    <option value="06">06</option>
                                    <option value="07">07</option>
                                    <option value="08">08</option>
                                    <option value="09">09</option>
                                    <option value="10">10</option>
                                    <option value="11">11</option>
                                    <option value="12">12</option>
                        </select> / <select name="year" id="year" title="">
                                    <option value="" selected="selected" data-localize="choose">Choose</option>
                                    <option value="17">2017</option>
                                    <option value="18">2018</option>
                                    <option value="19">2019</option>
                                    <option value="20">2020</option>
                                    <option value="21">2021</option>
                                    <option value="22">2022</option>
                                    <option value="23">2023</option>
                                    <option value="24">2024</option>
                                    <option value="25">2025</option>
                                    <option value="26">2026</option>
                                    <option value="27">2027</option>
                                    
                    </select></div>
                    </div>

                     <div class="line">
                         <div class="field form-element">
                            <input type="text" class="text-input required" name="cardHolderName" placeholder="Cardholder's name"  value="" id="cardHolderName" title="" maxlength="90" autocomplete="off"  style="width: 290px;text-transform: uppercase;"/></div>
                     </div>   

                    <div class="code" id="cvc">
                    	<div class="title-ltr" style="cursor: help" onmouseout="document.getElementById('vvDes').style.display = 'none';" onmouseover="document.getElementById('vvDes').style.display = '';" src="../img/cvv_logo.gif">CVC2/CVV2</div>
                        <div class="field"><input type="password" name="csc" id="csc" value="" maxlength="4" autocomplete="off" title=""  /></div>
                        <div class="image-cvv-des" id="vvDes" style="display:none">
                            <img alt="preview" src="../hpp/img/cvv_preview.jpg">
                        </div>
                    </div>
                    </div>
                    

                </div>
 
               <div class="block" id="mailNotify">
                      <div class="legend" data-localize="payment-notification" id="payment-notification"></div>

                        <div class="line">
                                 <div class="side-left">
                                    <div class="title" data-localize="email">Email</div>
                                    <div class="field"><input class="form-element required" type="text" id="email" name="email" value="mail@mail.ru" ></div>
                                </div>
                        </div>
              </div>

          <div class="block" style="margin-top: 20px;">
                <div style="text-align:center;">
                    <div class="button" style="display: inline-block;" id="cancelBth"><a class="btn-submit enabled" href="javascript:DixiAPI.cancel();" data-localize="cancel">CANCEL</a></div>
                    <div  class="button" style="display: inline-block;"><a class="btn-submit enabled" href="javascript:DixiAPI.submitForm();" data-localize="pay">PROCESS TRANSACTION</a></div>
                </div>
              </div>
            </div>
            

            <input type="hidden" name="street"  id="street"  style="width: 1px;">
            <input type="hidden" name="city"  id="city"  style="width: 1px;">
            
            <input type="hidden" id="accountNumber" name="accountNumber"/>
            <input type="hidden" id="accountAccessory" name="accountAccessory"/>
            <input type="hidden" id="clientHost" name="clientHost"/>
            <input type="hidden" id="requestSourceType" name="requestSourceType" value="html5"/>
                        <input type="hidden" id="hsx" name="hsx" value="138429c0-c126-4549-a7c7-8b1a551f468a"/>
            <input type="hidden" id="userCode" name="userCode"/>
            <input type="hidden" id="merchantAccountCode" name="merchantAccountCode" value="300042"/>
            <input type="hidden" id="lang" name="lang" value="EN"/>

           

 	        <div class="block" id="bitcoin-result" style="display: block;height: 195px;">
                        
            <div class="modal-body">
            <div id="paymentinfo">
            <div class="line">
              <div class="side-left" style="width: 300px;">
                        <div class="col-xs-12 col-sm-5 col-md-6 center-block text-center">
                            <a href="" id="BTC-img-href" class="">
                             <img class="img-qr" id="BTC-img" src="" alt="">
                            </a>
                        </div>
              </div>
              <div class="side-right" style="margin-left:300px;">
                 <table  style="border:1px;border-color:red;">
                    <tr>
                        <td colspan="2" style="font-weight: 900;" ><div id="" data-localize="BTC-checkout"/></td>
                   </tr>
                    <tr>
                      <td style="font-weight: 900;">
                            <a href="">
                                <div align="left">
                                    <img src="">
                                  </div>
                            </a>
                        </td>
                        <td  style="font-weight: 900;">
                   
                        <a style="margin:0" class="btn-submit enabled" href="" id="button-BTCPay" data-localize="BTC-pay">Pay with Bitcoin client</a>
                        </td>
                    </tr>
                    <tr >
                        <td style="font-weight: 900;text-align:center; padding-top:30px;   vertical-align:middle;"  colspan="2">
                            <div style="float: left;" data-localize="BTC-address"></div>
                            <div style="float: left;" id="BTC-Amount"></div>
                            <div style="float: left;" data-localize="BTC-address-end"></div>
                        </td>
                    </tr>
                      <tr>
                        <td style="font-weight: 900;" colspan="2">
                          <div class="field "  style="display: inline-block;">
                            <input  style="width: 325px;" class="form-element valid" id="BTC-Address" type="text" readonly="readonly" class="form-control text-center" value="" size="48" />
                          </div>
                        </span>
                        </td>
                        <td align="left">
                      
                          <img src="../hpp/img/stock_copy.png" />
                      
                        </td>
                    </tr>
                 </table>

              </div>    
            </div>
        </div>
        </div>
            <div class="modal-footer" >   
                <a class="btn-submit enabled" href="http://" data-localize="cancel">CANCEL</a>
          </div>
        </div>
        <div class="block" id="emv-result">
              <div class="company-logo" style="height:49px;"> </div>
              <div class="payment-info">
                  <div class="company"></div>
                  <div class="product">
                      <div class="company"></div>
                  </div>
              </div>
              <div id="messageContainer">
                  <table>
                      <tbody>
                          <tr>
                              <td> <img style='padding-top: 1px;' src='' id="result-logo"> </td>
                              <td id="message-td">
                                You transaction has been proccesed.
                              </td>
                          </tr>
                          <tr>
                              <td> </td>
                              <td> </td>
                          </tr>
                      </tbody>
                  </table>

              </div>
              <div id="clockContainer">
                  
              </div>
          </div>

		</form>
		
		<div class="footer"></div>
	</div>
</div>

<div id="timeout-remider" >
  <p>
    <span class="ui-icon ui-icon-clock" style="float:left; margin:0 7px 50px 0;"></span>
      <i data-localize="timeout-reminder" style="font-family: Arial, Helvetica, sans-serif;font-size: 12px;"></i>
  </p>

</div>

<script type="text/javascript">
$(document).ready(function() {
    jQuery(function($){

            // Init Lang Selection
            $(".en, .ru, .ar, .fr, .de, .ja, .nl, .it, .pt, .es, .da, .tr").click(function() {
               var localeFlag = $(this).attr('lang');
                var opts = { language: localeFlag, pathPrefix: "../hpp/locale", skipLanguage: "en-US" };
                if(localeFlag=='ar-AR'){
                    $('.title').css("float", "right");
                     $('#billing-info').css("direction", "rtl");
                     $('#streetNative').css("direction", "rtl");
                     $('#cityNative').css("direction", "rtl");
                     $('#zipCode').css("direction", "rtl");
                     $('#countryCode').css("direction", "rtl");
                     $('#state').css("direction", "rtl");
                     $('#phone').css("direction", "rtl");
                     $('#email').css("direction", "rtl");

                     
                }else{
                    $('.title').css("float", "left");
                    $('#billing-info').css("direction", "ltr");
                     $('#streetNative').css("direction", "ltr");
                     $('#cityNative').css("direction", "ltr");
                     $('#zipCode').css("direction", "ltr");
                     $('#countryCode').css("direction", "ltr");
                     $('#state').css("direction", "ltr");
                     $('#phone').css("direction", "ltr");
                     $('#email').css("direction", "ltr");

                }
                

                $("[data-localize]").localize("hpp", opts);
                $("#lang").val($(this).attr('class'));
                
    //            console.log("Change to lang"+localeFlag+" the calss "+$(this).attr('class'));

                DixiAPI.loadVerificationRules(localeFlag);
               
            });


     

            $.validator.addMethod("special", function(value, element) {
              return this.optional(element) || !(/[!|#|№|$|%|^|!|{|}|@|&|*|(|)|_|+|;|:|,|.|<|>|?|~|`|*|\s|\t|\r|\u0027|\u0022|\u002F|\u005C|\u005B|\u005D|]/.test(value)); 
            }, "Please enter only letters");

            $.validator.addMethod("letters", function(value, element) {
              return this.optional(element) || (/^[a-zA-Z0-9\.\s\,]*$/.test(value)); 
            }, "Please enter only in English");

            $.validator.addMethod("letters_ru", function(value, element) {
              return this.optional(element) || (/^[а-яА-Я0-9\.\s\,]*$/.test(value)); 
            }, "Please enter only RU letters");

            

            $.validator.addMethod("digits", function(value, element) {
              return this.optional(element) ||  !(/[0-9]/.test(value)); 
            }, "Please enter only letters not digits");


            // Init Verification 
                $("#process").validate({
                    valisClass: "form-element.valid",
                    debug: true,
                    ignoreTitle: true,
                    groups: {
                        username: "card_exp_month card_exp_year"
                      },
                        submitHandler: function(form) {

                      if(currentPaymentService =='card'){
                           if(DixiAPI.validateCardNumberAndType()){
                            $("#container").waitMe({ effect:'timer', text:waitMessage,color:'#f89306'});

                            $("#accountNumber").val($("#accountNumberMack").val());
                            $("#accountAccessory").val($("#month").val()+$("#year").val())
                            $("#requestSourceType").val("html5");
                            //Replace Cyrilic
                            $("#street").val(DixiAPI.translit($("#streetNative").val()));
                            $("#city").val(DixiAPI.translit($("#cityNative").val()));

                              }

                         }else if(currentPaymentService=='bitcoin' || currentPaymentService=='cashu'){
                            $("#container").waitMe({ effect:'timer', text:waitMessage,color:'#f89306'});
                                $("#accountNumber").val("WALLET");
                                $("#accountAccessory").val("1220");
                               }
                      
                             
                                 var formData   = $($("#process")[0].elements).not("#accountNumberMack,.ignore").serialize();

                                $.ajax({
                                  type: 'POST',
                                  url: '/gates/processing',
                                  data: formData,
                                  success: function(data, status, xhr) {

                                 //  console.log(xhr.getResponseHeader('Responce-Code'));
                                
                                  if(xhr.getResponseHeader('Responce-Code')!=null){
                                      if(xhr.getResponseHeader('Responce-Code')=='E13'){
                                          redirect = false;
                                          $("#paymentSelector").hide();
                                          $("#card-info").hide();
                                          $('#billing').hide();

                                          $('#message-td').text(decodeURI(xhr.getResponseHeader('ErrorMessage')).replace(/\+/g, ' '));
                                          $("#result-logo").attr('src','../hpp/img/expired.png');
                                          DixiAPI.timer();
                                          $("#emv-result").show();
                                          $("#container").waitMe("hide");

                                      }else  if(xhr.getResponseHeader('Responce-Code') == 'X02'){
                                        var xurl = $(location).attr('href')+'&'+data;

                                     //   console.log($.url(xurl).param('signatureContent')); // returns 'content'
                                        var json = $.parseJSON( $.url(xurl).param('signatureContent'));

                                     if(json.action == 'AwaitPayment' && json.provider == 'BTC'){
                                      $("#BTC-Amount").html('&nbsp;'+json.amount+'&nbsp;');
                                      $("#BTC-Address").val(json.address);

                                      var qrCode = 'bitcoin:'+json.address+'&amount='+json.amount;

                                      $("#BTC-img").attr('src','qr?'+qrCode);
                                      $("#BTC-img").prop('alt',qrCode);
                                      $("#BTC-img-href").attr('href',qrCode);
                                      $("#button-BTCPay").attr('href',qrCode);
                                      

                                      $("#paymentSelector").hide();
                                      $("#card-info").hide();
                                      $("#bitcoin-result").show();

                                      
                                      $("#container").waitMe("hide");

                                    }else if(json.action == 'Redirect' && json.provider == 'CashU'){


                                    var cashuForm = $('<form>', {
                                        'action': json.url,
                                        'method':'POST',
                                        'target': '_top'
                                    }).append($('<input>', {
                                        'name': json.fname,
                                        'value': json.fvalue,
                                        'type': 'hidden'
                                    }));

                                    
                                    $(document.body).append(cashuForm);
                                      cashuForm.submit();
                                      }
                                    

                                   }else  if(xhr.getResponseHeader('Responce-Code') == 'X03'){
                                          $("#3ds").html(data);
                                   }
                                    
                                  }else{
                                    var xurl = $(location).attr('href')+'&'+data;
    //                                console.log('responseType '+$.url(xurl).param('responseType'));

                                   if($.url(xurl).param('responseType')!='exception'){
                                              if(/^A0/.test($.url(xurl).param('responseCode'))){
                                                redirect = true;
                                                $("#paymentSelector").hide();
                                                $("#card-info").hide();
                                                $('#billing').hide();
                                                $("#result-logo").attr('src','../hpp/img/accept.png');
                                                DixiAPI.timer();
                                                $("#emv-result").show();
                                                $("#container").waitMe("hide");

                                              }else{
                                                redirect = false;
                                                $("#paymentSelector").hide();
                                                $("#card-info").hide();
                                                $('#billing').hide();
                                                $('#message-td').text($.url(xurl).param('responseMessage'));
                                                $("#result-logo").attr('src','../hpp/img/decline.png');
                                                DixiAPI.timer();
                                                $("#emv-result").show();
                                                $("#container").waitMe("hide");

                                              }


                                         }else{
                                      //exception
                                                redirect = false;
                                                $("#paymentSelector").hide();
                                                $("#card-info").hide();
                                                $('#billing').hide();
                                                $('#message-td').text($.url(xurl).param('errorMessage'));
                                                $("#result-logo").attr('src','../hpp/img/decline.png');
                                                DixiAPI.timer();
                                                $("#emv-result").show();
                                                $("#container").waitMe("hide");
                           
                                              }  

                                  }
                                   
                                   

                                  },
                                  error:  function(xhr, str){
                                    $("#container").waitMe("hide");

                                    alert('Возникла ошибка: ' + xhr.responseCode);
                                  }
                                });




                           // form.submit();
                           //}
                            
                        },
                       errorPlacement: function(error, element) {
                              DixiAPI.displayMessage(error.html(),element);
                        }
                    });


            // Load rules for error messages
                    DixiAPI.loadVerificationRules(locale);
               
                    fp.get(function(result, components) {
                                $("#userCode").val(result);
                                
                                });

            // Input mask 
                    $("#phone").inputmask("+999[99999999999]",{placeholder:'',clearIncomplete: false,autoUnmask:'true'});
                    $("#accountNumberMack").inputmask("9999-9999-9999-999[9]",{placeholder:'X',clearIncomplete: false,autoUnmask:'true'});

            //Localiztion support
                    var opts = { language: locale, pathPrefix: "../hpp/locale", skipLanguage: "en-US" };
                    $("[data-localize]").localize("hpp", opts)

   

            //Change code country
                $( "#countryCode" ).change(function() {
                      var code = $("#countryCode").find(":selected").attr("code");
                      var phoneFull = "7925856324";
                     if(phoneFull.indexOf(code)==1){
                         $("#phone").val(7925856324);
                        }else{
                          $("#phone").val(code);
                        }
                });


//                  $.ajaxSetup({
//                  async: false
//              });

                $.getJSON('https://geoip.nekudo.com/api/',
                  function(data){
                    if(data.country !=null && data.country != 'undefined'){
                       $("#countryCode").val(data.country.code);
                        var code = $("#countryCode").find(":selected").attr("code");
                        var phoneFull = "7925856324";
                       if(phoneFull.lastIndexOf(code, 0) === 0){
                          $("#phone").val(7925856324);
                        }else{
                          $("#phone").val(code);
                        }


                        
    //                    console.log('Seclectd phone code '+code);
                        if(data.country !="US"){
                            $("#state").val("NA");
                        }
                        $("#clientHost").val(data.ip);
                                            }
                   
                })

          
           // $("#amountDollars").val($("#amount").val() / 100.toFixed(2));

               // console.log((12300/100).toFixed(2));

                $("#amountPTS").text((12300/100).toFixed(2)+'  USD');
              //  $("#transactionCodeDiv").text($("#ticketNumber").val());
              //  $("#nameDBA").text($("#merchantName").val());



                var prevImgSel;

                $('#payMethods td').click(function() {
                     $("td.td-payselector-higlight").removeClass("td-payselector-higlight");
                     $(this).addClass("td-payselector-higlight");
                     
                     if(prevImgSel!=null){
                      prevImgSel.addClass("img-payselector");
                     }
                    
                    prevImgSel = $(this).children().children('img');
                     $(this).children().children('img').removeClass("img-payselector");

    //                 console.log('Next '+$(this).children().children('img').attr('src'));
                });

                $('#csc').keypad({
                    showAnim: 'fadeIn',
                    keypadOnly: false,
                    layout: ['123', 
                             '456', 
                             '789',
                              $.keypad.SPACE+'0'+$.keypad.SPACE]
                    });

    //            console.log('cancelURL '+$("#cancelURL").val());

                if($("#cancelURL").val() == null || $("#cancelURL").val()==''|| $("#cancelURL").val()=='undefined'|| $("#cancelURL").val()=='none'){
                 
                    $("#cancelBth").hide();
                }
            

            $('#paymentSelector input:radio').click(function() {

    //            console.log($(this).val());
                var divToHide = $(this).val();
                //$(divToHide).hide();
    //             console.log('To Hide '+divToHide);
                 
                 mac = $(this).data("mac");
    //             console.log('Custom data '+mac);
                 $("#merchantAccountCode").val(mac);

                currentPaymentService = divToHide;

                 if(divToHide=='bitcoin' || divToHide=='cashu'){
                    $('#billing').hide();
                    $('#vmc').hide();
                    $('#billing').find('input, textarea, button, select').attr('disabled',true);
                    $('#vmc').find('input, textarea, button, select').attr('disabled',true);

                    $('#mailNotify').show();

                  }else if(divToHide=='card'){
                    $('#mailNotify').hide();
                    $('#billing').show();
                    $('#vmc').show();

                    $('#billing').find('input, textarea, button, select').attr('disabled',false);
                    $('#vmc').find('input, textarea, button, select').attr('disabled',false);
                 }
                                                                }

              );


            //Hide divs
            $("#bitcoin-result").hide();
            $("#emv-result").hide();
            $('#mailNotify').hide();
            

            $('#id-payselector-1').trigger('click');
            $('#id-payselector-radio-1').trigger('click');

            if($("#payMethods").data("count")==1 && currentPaymentService=='card'){
                   $("#paymentSelector").hide();
                }


                  
            if(!$("#hsx").val()) {
               $("#emv-result").show();
               $("#paymentSelector").hide();
               $("#card-info").hide();
               $('#billing').hide();
               $('#message-td').text('${hppParameters.errorMessage}');
               $("#result-logo").attr('src','../hpp/img/decline.png');
               DixiAPI.timer();
               $("#emv-result").show();
               $("#container").waitMe("hide");

               
              }  

            $("#requestSourceType").val("html5");


            $('#collapse').on({'click': function() {
                     var src = ($(this).attr('src') === '../hpp/img/collapse-down.png')
                        ? '../hpp/img/collapse-up.png'
                        : '../hpp/img/collapse-down.png';
                     $(this).attr('src', src);
                }
            });

          $('#invoice-info').on({'click': function() {
            $('#invoice-table').slideToggle(500, 'swing');
             }
            });

          $('#invoice-table').hide();

        
                         //   $('.title').css("float", "right");
//END ready function
      });

});

 $( "#timeout-remider" ).hide();
 $( "#streetNative" ).focus();

</script>



<!--include parameters--> 



</body>
</html>